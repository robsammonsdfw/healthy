<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Health Assessment Report</title>
    <!-- Google Fonts for Manrope -->
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <!-- Bootstrap for responsive grid -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />

    <!-- Add defer to ensure DOM is loaded before script runs -->
    <script src="main.js" defer></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
      defer
    ></script>
  </head>
  <body>
    <div class="container">
      <!-- Add Report Title -->
      <h1 class="report-title">My Health Report</h1>

      <!-- Header Section -->
      <div class="report-header">
        <!-- Demographics Section -->
        <div class="demographics-section">
          <h2 class="section-title">Demographics</h2>
          <div class="data-grid">
            <span class="data-label">Name</span>
            <span class="data-value">{{USER_NAME}}</span>

            <span class="data-label">Date</span>
            <span class="data-value">{{SCAN_DATE}}</span>

            <span class="data-label">Age</span>
            <span class="data-value">{{USER_AGE}}</span>

            <span class="data-label">Gender</span>
            <span class="data-value">{{USER_GENDER}}</span>

            <span class="data-label">Height</span>
            <span class="data-value">{{USER_HEIGHT}}</span>

            <span class="data-label">Weight</span>
            <span class="data-value">{{USER_WEIGHT}}</span>
          </div>
        </div>

        <div class="measurements-section">
          <h2 class="section-title">Body Measurements</h2>
          <div class="data-grid">
            <span class="data-label">Neck</span>
            <span class="data-value">{{MEASUREMENT_NECK}}</span>

            <span class="data-label">Chest</span>
            <span class="data-value">{{MEASUREMENT_CHEST}}</span>

            <span class="data-label">Waist</span>
            <span class="data-value">{{MEASUREMENT_WAIST}}</span>

            <span class="data-label">Arms</span>
            <span class="data-value">{{MEASUREMENT_ARMS}}</span>

            <span class="data-label">Thighs</span>
            <span class="data-value">{{MEASUREMENT_THIGHS}}</span>

            <span class="data-label">Calves</span>
            <span class="data-value">{{MEASUREMENT_CALVES}}</span>
          </div>
        </div>
      </div>

      <!-- Full-width background section for 3D avatar section -->
      <section class="full-width-bg">
        <div class="container">
          <!-- Section 1: 3D OBJ files side by side -->
          <section id="avatar-section" class="row">
            <div class="col-6 text-center p-0">
              <span class="weight-label">TODAY</span>
              <span class="weight-text">{{CURRENT_WEIGHT}}</span>
              <div class="avatar-box">
                <div id="today-avatar" class="avatar-container"></div>
              </div>
            </div>
            <div class="col-6 text-center p-0">
              <span class="weight-label">FUTURE ME</span>
              <span class="weight-text" id="target-weight">140.0 lbs</span>
              <div class="avatar-box">
                <div id="future-avatar" class="avatar-container"></div>
              </div>
            </div>
          </section>
        </div>
      </section>

      <!-- Section 2: Report Summary -->
      <section id="summary-section" class="mt-4">
        <h2 style="text-align: left">Report Summary</h2>
        <p class="light-text">{{SUMMARY_TEXT}}</p>
        <div class="row">
          <div class="col-6">
            <div class="metric-box">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-scale-icon lucide-scale"><path d="m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z"/><path d="m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z"/><path d="M7 21h10"/><path d="M12 3v18"/><path d="M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2"/></svg>
              <div class="metric-content">
                <div class="metric-label">Body Fat %</div>
                <span class="status">{{BODY_FAT_PERCENTAGE}}</span>
              </div>
            </div>
          </div>
          <div class="col-6">
            <div class="metric-box">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-weight-icon lucide-weight"><circle cx="12" cy="5" r="3"/><path d="M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z"/></svg>
              <div class="metric-content">
                <div class="metric-label">Fat Mass</div>
                <span class="status">{{FAT_MASS}}</span>
              </div>
            </div>
          </div>
          <div class="col-6">
            <div class="metric-box">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-biceps-flexed-icon lucide-biceps-flexed"><path d="M12.409 13.017A5 5 0 0 1 22 15c0 3.866-4 7-9 7-4.077 0-8.153-.82-10.371-2.462-.426-.316-.631-.832-.62-1.362C2.118 12.723 2.627 2 10 2a3 3 0 0 1 3 3 2 2 0 0 1-2 2c-1.105 0-1.64-.444-2-1"/><path d="M15 14a5 5 0 0 0-7.584 2"/><path d="M9.964 6.825C8.019 7.977 9.5 13 8 15"/></svg>
              <div class="metric-content">
                <div class="metric-label">Lean Mass</div>
                <span class="status">{{LEAN_MASS}}</span>
              </div>
            </div>
          </div>
          <div class="col-6">
            <div class="metric-box">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-ruler-dimension-line-icon lucide-ruler-dimension-line"><path d="M12 15v-3.014"/><path d="M16 15v-3.014"/><path d="M20 6H4"/><path d="M20 8V4"/><path d="M4 8V4"/><path d="M8 15v-3.014"/><rect x="3" y="12" width="18" height="7" rx="1"/></svg>
              <div class="metric-content">
                <div class="metric-label">Waist-to-Height</div>
                <span class="status">{{WAIST_RATIO}}</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Body Fat Section -->
      <section class="full-width-bg">
        <div class="container mt-4">
          <div class="detailed-label">Body Fat Percentage</div>

          <p class="description">
            The percentage of your body that is fat. One of the top predictors of long-term health,
            lifespan, metabolism, and athletic performance. Improve your body fat percentage by
            losing fat, building muscle, or both.
          </p>

          <p class="description">
            The percentile bar shows how your body fat percentage compares to others in your gender
            and age range (<span class="age-range">{{BODY_FAT_AGE_RANGE}}</span> years). A value in
            the 50th percentile means your measurement is average for your demographic, while the
            75th percentile means 75% of people have a lower value than you.
          </p>

          <!-- Bars -->
          <div class="bar-container">
            <div class="gradient-bar">
              <div class="marker" style="left: {{BODY_FAT_MARKER_POSITION}}%"></div>
            </div>
            <div class="bar-labels">
              <span>Low</span>
              <span>Minimum</span>
              <span>Healthy</span>
              <span>High</span>
              <span>Unhealthy</span>
            </div>

            <!-- Percentile bar -->
            <div class="percentile-container" data-metric="body-fat">
              <div class="percentile-bar">
                <div class="percentile-segment p5" style="width: 5%"></div>
                <div class="percentile-segment p10" style="width: 5%"></div>
                <div class="percentile-segment p15" style="width: 5%"></div>
                <div class="percentile-segment p25" style="width: 10%"></div>
                <div class="percentile-segment p50" style="width: 25%"></div>
                <div class="percentile-segment p75" style="width: 25%"></div>
                <div class="percentile-segment p90" style="width: 15%"></div>
                <div class="percentile-segment p95" style="width: 5%"></div>
                <div class="percentile-segment p100" style="width: 5%"></div>
                <div
                  class="percentile-marker"
                  style="left: {{BODY_FAT_PERCENTILE_POSITION}}%"
                ></div>
              </div>
              <div class="percentile-labels">
                <span>5%</span>
                <span>25%</span>
                <span>50%</span>
                <span>75%</span>
                <span>95%</span>
              </div>
            </div>

            <!-- Debug info -->
            <!--
            <div class="debug-info" style="text-align: center">
              Expected positions: <span class="debug-text">{{BODY_FAT_DEBUG}}</span>
            </div>
            -->
          </div>
        </div>
      </section>

      <!-- Fat Mass Section -->
      <div class="container mt-4">
        <div class="detailed-label">Fat Mass</div>

        <p class="description">
          Decreasing fat mass is associated with improved health, lifespan, and athletic
          performance. However, it is not as strong of an indicator as body fat % because body fat %
          incorporates both fat and lean mass.
        </p>

        <p class="description">
          The percentile bar compares your fat mass to others in your gender and age range (<span
            class="age-range"
            >{{FAT_MASS_AGE_RANGE}}</span
          >
          years). The percentiles are based on population data and measured in kilograms, with the
          50th percentile representing the average value.
        </p>

        <div class="bar-container">
          <div class="gradient-bar fat-mass-gradient">
            <div class="marker" style="left: {{FAT_MASS_MARKER_POSITION}}%"></div>
          </div>
          <div class="bar-labels">
            <span>Very Low</span>
            <span>Low</span>
            <span>Healthy</span>
            <span>High</span>
            <span>Unhealthy</span>
          </div>

          <!-- Percentile bar -->
          <div class="percentile-container" data-metric="fat-mass">
            <div class="percentile-bar">
              <div class="percentile-segment p5" style="width: 5%"></div>
              <div class="percentile-segment p10" style="width: 5%"></div>
              <div class="percentile-segment p15" style="width: 5%"></div>
              <div class="percentile-segment p25" style="width: 10%"></div>
              <div class="percentile-segment p50" style="width: 25%"></div>
              <div class="percentile-segment p75" style="width: 25%"></div>
              <div class="percentile-segment p90" style="width: 15%"></div>
              <div class="percentile-segment p95" style="width: 5%"></div>
              <div class="percentile-segment p100" style="width: 5%"></div>
              <div class="percentile-marker" style="left: {{FAT_MASS_PERCENTILE_POSITION}}%"></div>
            </div>
            <div class="percentile-labels">
              <span>5%</span>
              <span>25%</span>
              <span>50%</span>
              <span>75%</span>
              <span>95%</span>
            </div>
          </div>

          <!-- Debug info -->
          <!--
          <div class="debug-info" style="text-align: center">
            Expected positions: <span class="debug-text">{{FAT_MASS_DEBUG}}</span>
          </div>
          -->
        </div>
      </div>

      <!-- Lean Mass Section -->
      <section class="full-width-bg">
        <div class="container mt-4">
          <div class="detailed-label">Lean Mass</div>

          <p class="description">
            Your non-fat or muscle mass (also including water, bone, etc.). More lean mass is
            associated with better health, lifespan, metabolism, and athletic performance.
          </p>

          <p class="description">
            The percentile bar compares your lean mass to others in your gender and age range (<span
              class="age-range"
              >{{LEAN_MASS_AGE_RANGE}}</span
            >
            years). The percentiles are measured in kilograms, with higher percentiles indicating
            more lean mass relative to the population.
          </p>

          <div class="bar-container">
            <div class="gradient-bar lean-mass-gradient">
              <div class="marker" style="left: {{LEAN_MASS_MARKER_POSITION}}%"></div>
            </div>
            <div class="bar-labels">
              <span>Very Low</span>
              <span>Low</span>
              <span>Healthy</span>
              <span>Healthy</span>
              <span>Healthy</span>
            </div>

            <!-- Percentile bar -->
            <div class="percentile-container" data-metric="lean-mass">
              <div class="percentile-bar">
                <div class="percentile-segment p5" style="width: 5%"></div>
                <div class="percentile-segment p10" style="width: 5%"></div>
                <div class="percentile-segment p15" style="width: 5%"></div>
                <div class="percentile-segment p25" style="width: 10%"></div>
                <div class="percentile-segment p50" style="width: 25%"></div>
                <div class="percentile-segment p75" style="width: 25%"></div>
                <div class="percentile-segment p90" style="width: 15%"></div>
                <div class="percentile-segment p95" style="width: 5%"></div>
                <div class="percentile-segment p100" style="width: 5%"></div>
                <div
                  class="percentile-marker"
                  style="left: {{LEAN_MASS_PERCENTILE_POSITION}}%"
                ></div>
              </div>
              <div class="percentile-labels">
                <span>5%</span>
                <span>25%</span>
                <span>50%</span>
                <span>75%</span>
                <span>95%</span>
              </div>
            </div>

            <!-- Debug info -->
            <!--
            <div class="debug-info" style="text-align: center">
              Expected positions: <span class="debug-text">{{LEAN_MASS_DEBUG}}</span>
            </div>
            -->
          </div>
        </div>
      </section>

      <!-- Waist-to-Height Section -->
      <div class="container mt-4">
        <div class="detailed-label">Waist-to-Height Ratio</div>

        <p class="description">
          Waist-to-height ratio is a strong indicator of health and longevity. A lower ratio reduces
          the risk of heart disease, diabetes, and overall mortality by better reflecting abdominal
          fat than BMI.
        </p>

        <p class="description">
          The percentile bar shows how your waist circumference compares to others in your gender
          and age range (<span class="age-range">{{WAIST_RATIO_AGE_RANGE}}</span> years). The
          percentiles are based on population measurements in meters, with lower percentiles
          generally indicating better health outcomes.
        </p>

        <div class="bar-container">
          <div class="gradient-bar waist-ratio-gradient">
            <div class="marker" style="left: {{WAIST_RATIO_MARKER_POSITION}}%"></div>
          </div>
          <div class="bar-labels">
            <span>In Range</span>
            <span>High</span>
            <span>Very High</span>
          </div>

          <!-- Percentile bar -->
          <div class="percentile-container" data-metric="waist-ratio">
            <div class="percentile-bar">
              <div class="percentile-segment p5" style="width: 5%"></div>
              <div class="percentile-segment p10" style="width: 5%"></div>
              <div class="percentile-segment p15" style="width: 5%"></div>
              <div class="percentile-segment p25" style="width: 10%"></div>
              <div class="percentile-segment p50" style="width: 25%"></div>
              <div class="percentile-segment p75" style="width: 25%"></div>
              <div class="percentile-segment p90" style="width: 15%"></div>
              <div class="percentile-segment p95" style="width: 5%"></div>
              <div class="percentile-segment p100" style="width: 5%"></div>
              <div
                class="percentile-marker"
                style="left: {{WAIST_RATIO_PERCENTILE_POSITION}}%"
              ></div>
            </div>
            <div class="percentile-labels">
              <span>5%</span>
              <span>25%</span>
              <span>50%</span>
              <span>75%</span>
              <span>95%</span>
            </div>
          </div>

          <!-- Debug info -->
          <!--
          <div class="debug-info" style="text-align: center">
            Expected positions: <span class="debug-text">{{WAIST_RATIO_DEBUG}}</span>
          </div>
          -->
        </div>
      </div>

      <!-- Metabolism Section -->
      <div class="container mt-4">
        <div class="row">
          <div class="col-6">
            <div class="detailed-label">Metabolism</div>
          </div>
        </div>

        <p class="description">
          Metabolism is the sum of all chemical processes that take place in your body. It is also
          the amount of energy (Calories) your body needs daily. Track your daily caloric intake and
          eat under this number to lose weight or over to gain. In general, a higher metabolism
          means better health and faster weight-loss. Improve yours by building muscle and/or
          improving cardiovascular fitness (VO2 max).
        </p>

        <div class="metabolism-grid">
          <div class="metabolism-box">
            <div class="metabolism-header">Weight Loss</div>
            <div class="metabolism-value" id="weight-loss-value">2,079</div>
            <div class="metabolism-unit">calories per day</div>
            <div class="metabolism-description">Range for fat loss</div>
          </div>
          <div class="metabolism-box">
            <div class="metabolism-header">Maintain</div>
            <div class="metabolism-value" id="maintenance-value">2,579</div>
            <div class="metabolism-unit">calories per day</div>
            <div class="metabolism-description">To maintain current weight</div>
            <div class="metabolism-base">Base BMR: <span id="bmr-value">1,663</span></div>
          </div>
          <div class="metabolism-box">
            <div class="metabolism-header">Build Muscle</div>
            <div class="metabolism-value" id="muscle-gain-value">3,079</div>
            <div class="metabolism-unit">calories per day</div>
            <div class="metabolism-description">Range for muscle gain</div>
          </div>
        </div>
        <div class="mt-2">
          <p class="description">
            These recommendations assume a sedentary lifestyle. If you are more active, your calorie
            needs will be higher. The minimum recommended daily intake is 1,200 calories.
          </p>
        </div>
      </div>
    </div>

    <!-- Add this for debugging -->
    <script>
      // Verify script loading
      console.log("HTML loaded");

      // Add error handler
      window.onerror = function (msg, url, lineNo, columnNo, error) {
        console.error(
          "Error: " +
            msg +
            "\nURL: " +
            url +
            "\nLine: " +
            lineNo +
            "\nColumn: " +
            columnNo +
            "\nError object: " +
            JSON.stringify(error)
        );
        return false;
      };

      // Verify elements exist after DOM loads
      document.addEventListener("DOMContentLoaded", function () {
        console.log("DOM loaded");
        [
          "neck-circumference",
          "chest-circumference",
          "waist-circumference",
          "arms-circumference",
          "thighs-circumference",
          "calves-circumference",
        ].forEach((id) => {
          const element = document.getElementById(id);
          console.log(`Element ${id} exists:`, !!element);
        });
      });
    </script>
  </body>
</html>
